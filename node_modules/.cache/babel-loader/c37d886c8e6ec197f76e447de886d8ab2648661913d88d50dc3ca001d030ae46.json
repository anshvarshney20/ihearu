{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import DashboardNavbar from'./DashboardNavbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CategoryView=()=>{const{_id}=useParams();const navigate=useNavigate();const[data,setData]=useState({});const[categoryName,setCategoryName]=useState('');const[categoryImage,setCategoryImage]=useState(null);const apiBaseUrl=process.env.REACT_APP_API_URL;useEffect(()=>{const fetchCategory=async()=>{try{const authToken=localStorage.getItem('access');if(!authToken){throw new Error('Authentication token not found');}const headers={'x-auth-token-admin':authToken};const response=await axios.get(\"\".concat(apiBaseUrl,\"/api/admin/viewCategories/\").concat(_id),{headers});const categoryData=response.data.results.categories;setData(categoryData);setCategoryName(categoryData.name);}catch(error){console.error('Error fetching category data:',error);}};fetchCategory();},[_id,apiBaseUrl]);const formatDate=dateString=>{const options={day:'numeric',month:'numeric',year:'2-digit'};return new Date(dateString).toLocaleDateString('en-GB',options);};const handleNameChange=event=>{setCategoryName(event.target.value);};const handleImageChange=event=>{setCategoryImage(event.target.files[0]);};const updateCategory=async()=>{const formData=new FormData();formData.append('name',categoryName);formData.append('image',categoryImage);try{const authToken=localStorage.getItem('access');const headers={'x-auth-token-admin':authToken};const response=await fetch(\"\".concat(apiBaseUrl,\"/api/admin/editCategory/\").concat(_id),{method:'POST',body:formData,headers:headers});const responseData=await response.json();if(!responseData.error){console.log(responseData.message);console.log(responseData.results.newCat);}else{console.error(responseData.message);}}catch(error){console.error('An error occurred:',error);}};const handleUpdate=event=>{event.preventDefault();updateCategory();navigate('/category-management');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"admin_main\",children:[/*#__PURE__*/_jsx(DashboardNavbar,{}),/*#__PURE__*/_jsx(\"div\",{class:\"admin_panel_data height_adjust\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row mx-0\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-12 design_outter_comman shadow mb-4 toggle_set\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row comman_header justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Update Category Details\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"row align-items-center justify-content-center form-design position-relative p-4 py-5\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-10\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group col-12 choose_file position-relative\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Category Image\"}),/*#__PURE__*/_jsxs(\"label\",{for:\"upload_video\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-camera me-1\"}),\"Choose File\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",class:\"form-control\",name:\"image\",id:\"upload_video\",onChange:e=>handleImageChange(e)})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"\",children:\"Category Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",value:categoryName,onChange:e=>setCategoryName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"\",children:\"Added Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatDate(data===null||data===void 0?void 0:data.updatedAt),class:\"form-control\",readOnly:true})]}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group mb-0 col-12 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,class:\"comman_btn d-inline-flex\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Update\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\"})]})})]})})})]})});};export default CategoryView;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","DashboardNavbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CategoryView","_id","navigate","data","setData","categoryName","setCategoryName","categoryImage","setCategoryImage","apiBaseUrl","process","env","REACT_APP_API_URL","fetchCategory","authToken","localStorage","getItem","Error","headers","response","get","concat","categoryData","results","categories","name","error","console","formatDate","dateString","options","day","month","year","Date","toLocaleDateString","handleNameChange","event","target","value","handleImageChange","files","updateCategory","formData","FormData","append","fetch","method","body","responseData","json","log","message","newCat","handleUpdate","preventDefault","children","class","for","type","id","onChange","e","updatedAt","readOnly","onClick"],"sources":["D:/Tech Gropes/ihearu/src/Pages/Dashboard_Components/CategoryView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport DashboardNavbar from './DashboardNavbar';\r\n\r\nconst CategoryView = () => {\r\n    const { _id } = useParams();\r\n    const navigate = useNavigate()\r\n    const [data, setData] = useState({});\r\n    const [categoryName, setCategoryName] = useState('');\r\n    const [categoryImage, setCategoryImage] = useState(null);\r\n\r\n    const apiBaseUrl = process.env.REACT_APP_API_URL;\r\n\r\n    useEffect(() => {\r\n        const fetchCategory = async () => {\r\n            try {\r\n                const authToken = localStorage.getItem('access');\r\n\r\n                if (!authToken) {\r\n                    throw new Error('Authentication token not found');\r\n                }\r\n\r\n                const headers = {\r\n                    'x-auth-token-admin': authToken,\r\n                };\r\n\r\n                const response = await axios.get(`${apiBaseUrl}/api/admin/viewCategories/${_id}`, {\r\n                    headers,\r\n                });\r\n                const categoryData = response.data.results.categories;\r\n                setData(categoryData);\r\n                setCategoryName(categoryData.name);\r\n            } catch (error) {\r\n                console.error('Error fetching category data:', error);\r\n            }\r\n        };\r\n\r\n        fetchCategory();\r\n    }, [_id, apiBaseUrl]);\r\n\r\n    const formatDate = (dateString) => {\r\n        const options = { day: 'numeric', month: 'numeric', year: '2-digit' };\r\n        return new Date(dateString).toLocaleDateString('en-GB', options);\r\n    };\r\n\r\n    const handleNameChange = (event) => {\r\n        setCategoryName(event.target.value);\r\n    };\r\n\r\n    const handleImageChange = (event) => {\r\n        setCategoryImage(event.target.files[0]);\r\n    };\r\n\r\n    const updateCategory = async () => {\r\n        const formData = new FormData();\r\n        formData.append('name', categoryName);\r\n        formData.append('image', categoryImage);\r\n\r\n        try {\r\n            const authToken = localStorage.getItem('access');\r\n            const headers = {\r\n                'x-auth-token-admin': authToken,\r\n            };\r\n\r\n            const response = await fetch(`${apiBaseUrl}/api/admin/editCategory/${_id}`, {\r\n                method: 'POST',\r\n                body: formData,\r\n                headers: headers,\r\n            });\r\n\r\n            const responseData = await response.json();\r\n\r\n            if (!responseData.error) {\r\n                console.log(responseData.message);\r\n                console.log(responseData.results.newCat);\r\n            } else {\r\n                console.error(responseData.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('An error occurred:', error);\r\n        }\r\n    };\r\n\r\n    const handleUpdate = (event) => {\r\n        event.preventDefault();\r\n        updateCategory();\r\n        navigate('/category-management')\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div class=\"admin_main\">\r\n                <DashboardNavbar />\r\n                <div class=\"admin_panel_data height_adjust\">\r\n                    <div class=\"row mx-0\">\r\n                        <div class=\"col-12 design_outter_comman shadow mb-4 toggle_set\">\r\n                            <div class=\"row comman_header justify-content-between\">\r\n                                <div class=\"col-auto\">\r\n                                    <h2>Update Category Details</h2>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <form class=\"row align-items-center justify-content-center form-design position-relative p-4 py-5\">\r\n                                    <div class=\"col-10\">\r\n                                        <div class=\"row\">\r\n                                            <div class=\"form-group col-12 choose_file position-relative\">\r\n                                                <span>Category Image</span>\r\n                                                <label for=\"upload_video\"><i class=\"fal fa-camera me-1\"></i>Choose File</label>\r\n                                                <input type=\"file\" class=\"form-control\" name=\"image\" id=\"upload_video\" onChange={(e)=>handleImageChange(e)} />\r\n                                            </div>\r\n                                            <div class=\"form-group col-6\">\r\n                                                <label for=\"\">Category Name</label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    class=\"form-control\"\r\n                                                    value={categoryName}\r\n                                                    onChange={(e) => setCategoryName(e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                            <div class=\"form-group col-6\">\r\n                                                <label for=\"\">Added Date</label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={formatDate(data?.updatedAt)}\r\n                                                    class=\"form-control\"\r\n                                                    readOnly\r\n                                                />\r\n                                            </div>\r\n\r\n                                            <div class=\"form-group mb-0 col-12 text-center\">\r\n                                                <button onClick={handleUpdate} class=\"comman_btn d-inline-flex\">\r\n                                                    <span>Update</span>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-auto\"></div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CategoryView;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEhD,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,GAAI,CAAC,CAAGV,SAAS,CAAC,CAAC,CAC3B,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACa,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACiB,YAAY,CAAEC,eAAe,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACmB,aAAa,CAAEC,gBAAgB,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAExD,KAAM,CAAAqB,UAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAEhDvB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAwB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACA,KAAM,CAAAC,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAEhD,GAAI,CAACF,SAAS,CAAE,CACZ,KAAM,IAAI,CAAAG,KAAK,CAAC,gCAAgC,CAAC,CACrD,CAEA,KAAM,CAAAC,OAAO,CAAG,CACZ,oBAAoB,CAAEJ,SAC1B,CAAC,CAED,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAA3B,KAAK,CAAC4B,GAAG,IAAAC,MAAA,CAAIZ,UAAU,+BAAAY,MAAA,CAA6BpB,GAAG,EAAI,CAC9EiB,OACJ,CAAC,CAAC,CACF,KAAM,CAAAI,YAAY,CAAGH,QAAQ,CAAChB,IAAI,CAACoB,OAAO,CAACC,UAAU,CACrDpB,OAAO,CAACkB,YAAY,CAAC,CACrBhB,eAAe,CAACgB,YAAY,CAACG,IAAI,CAAC,CACtC,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACzD,CACJ,CAAC,CAEDb,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACZ,GAAG,CAAEQ,UAAU,CAAC,CAAC,CAErB,KAAM,CAAAmB,UAAU,CAAIC,UAAU,EAAK,CAC/B,KAAM,CAAAC,OAAO,CAAG,CAAEC,GAAG,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,SAAU,CAAC,CACrE,MAAO,IAAI,CAAAC,IAAI,CAACL,UAAU,CAAC,CAACM,kBAAkB,CAAC,OAAO,CAAEL,OAAO,CAAC,CACpE,CAAC,CAED,KAAM,CAAAM,gBAAgB,CAAIC,KAAK,EAAK,CAChC/B,eAAe,CAAC+B,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACvC,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAIH,KAAK,EAAK,CACjC7B,gBAAgB,CAAC6B,KAAK,CAACC,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAC3C,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAExC,YAAY,CAAC,CACrCsC,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEtC,aAAa,CAAC,CAEvC,GAAI,CACA,KAAM,CAAAO,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAChD,KAAM,CAAAE,OAAO,CAAG,CACZ,oBAAoB,CAAEJ,SAC1B,CAAC,CAED,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAA2B,KAAK,IAAAzB,MAAA,CAAIZ,UAAU,6BAAAY,MAAA,CAA2BpB,GAAG,EAAI,CACxE8C,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEL,QAAQ,CACdzB,OAAO,CAAEA,OACb,CAAC,CAAC,CAEF,KAAM,CAAA+B,YAAY,CAAG,KAAM,CAAA9B,QAAQ,CAAC+B,IAAI,CAAC,CAAC,CAE1C,GAAI,CAACD,YAAY,CAACvB,KAAK,CAAE,CACrBC,OAAO,CAACwB,GAAG,CAACF,YAAY,CAACG,OAAO,CAAC,CACjCzB,OAAO,CAACwB,GAAG,CAACF,YAAY,CAAC1B,OAAO,CAAC8B,MAAM,CAAC,CAC5C,CAAC,IAAM,CACH1B,OAAO,CAACD,KAAK,CAACuB,YAAY,CAACG,OAAO,CAAC,CACvC,CACJ,CAAE,MAAO1B,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC9C,CACJ,CAAC,CAED,KAAM,CAAA4B,YAAY,CAAIjB,KAAK,EAAK,CAC5BA,KAAK,CAACkB,cAAc,CAAC,CAAC,CACtBb,cAAc,CAAC,CAAC,CAChBxC,QAAQ,CAAC,sBAAsB,CAAC,CACpC,CAAC,CAED,mBACIP,IAAA,CAAAI,SAAA,EAAAyD,QAAA,cACI3D,KAAA,QAAK4D,KAAK,CAAC,YAAY,CAAAD,QAAA,eACnB7D,IAAA,CAACF,eAAe,GAAE,CAAC,cACnBE,IAAA,QAAK8D,KAAK,CAAC,gCAAgC,CAAAD,QAAA,cACvC7D,IAAA,QAAK8D,KAAK,CAAC,UAAU,CAAAD,QAAA,cACjB3D,KAAA,QAAK4D,KAAK,CAAC,oDAAoD,CAAAD,QAAA,eAC3D7D,IAAA,QAAK8D,KAAK,CAAC,2CAA2C,CAAAD,QAAA,cAClD7D,IAAA,QAAK8D,KAAK,CAAC,UAAU,CAAAD,QAAA,cACjB7D,IAAA,OAAA6D,QAAA,CAAI,yBAAuB,CAAI,CAAC,CAC/B,CAAC,CACL,CAAC,cACN7D,IAAA,QAAK8D,KAAK,CAAC,KAAK,CAAAD,QAAA,cACZ3D,KAAA,SAAM4D,KAAK,CAAC,sFAAsF,CAAAD,QAAA,eAC9F7D,IAAA,QAAK8D,KAAK,CAAC,QAAQ,CAAAD,QAAA,cACf3D,KAAA,QAAK4D,KAAK,CAAC,KAAK,CAAAD,QAAA,eACZ3D,KAAA,QAAK4D,KAAK,CAAC,iDAAiD,CAAAD,QAAA,eACxD7D,IAAA,SAAA6D,QAAA,CAAM,gBAAc,CAAM,CAAC,cAC3B3D,KAAA,UAAO6D,GAAG,CAAC,cAAc,CAAAF,QAAA,eAAC7D,IAAA,MAAG8D,KAAK,CAAC,oBAAoB,CAAI,CAAC,cAAW,EAAO,CAAC,cAC/E9D,IAAA,UAAOgE,IAAI,CAAC,MAAM,CAACF,KAAK,CAAC,cAAc,CAAChC,IAAI,CAAC,OAAO,CAACmC,EAAE,CAAC,cAAc,CAACC,QAAQ,CAAGC,CAAC,EAAGtB,iBAAiB,CAACsB,CAAC,CAAE,CAAE,CAAC,EAC7G,CAAC,cACNjE,KAAA,QAAK4D,KAAK,CAAC,kBAAkB,CAAAD,QAAA,eACzB7D,IAAA,UAAO+D,GAAG,CAAC,EAAE,CAAAF,QAAA,CAAC,eAAa,CAAO,CAAC,cACnC7D,IAAA,UACIgE,IAAI,CAAC,MAAM,CACXF,KAAK,CAAC,cAAc,CACpBlB,KAAK,CAAElC,YAAa,CACpBwD,QAAQ,CAAGC,CAAC,EAAKxD,eAAe,CAACwD,CAAC,CAACxB,MAAM,CAACC,KAAK,CAAE,CACpD,CAAC,EACD,CAAC,cACN1C,KAAA,QAAK4D,KAAK,CAAC,kBAAkB,CAAAD,QAAA,eACzB7D,IAAA,UAAO+D,GAAG,CAAC,EAAE,CAAAF,QAAA,CAAC,YAAU,CAAO,CAAC,cAChC7D,IAAA,UACIgE,IAAI,CAAC,MAAM,CACXpB,KAAK,CAAEX,UAAU,CAACzB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,SAAS,CAAE,CACnCN,KAAK,CAAC,cAAc,CACpBO,QAAQ,MACX,CAAC,EACD,CAAC,cAENrE,IAAA,QAAK8D,KAAK,CAAC,oCAAoC,CAAAD,QAAA,cAC3C7D,IAAA,WAAQsE,OAAO,CAAEX,YAAa,CAACG,KAAK,CAAC,0BAA0B,CAAAD,QAAA,cAC3D7D,IAAA,SAAA6D,QAAA,CAAM,QAAM,CAAM,CAAC,CACf,CAAC,CACR,CAAC,EACL,CAAC,CACL,CAAC,cACN7D,IAAA,QAAK8D,KAAK,CAAC,UAAU,CAAM,CAAC,EAC1B,CAAC,CACN,CAAC,EACL,CAAC,CACL,CAAC,CACL,CAAC,EACL,CAAC,CACR,CAAC,CAEX,CAAC,CAED,cAAe,CAAAzD,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}